p(x) :- a(x).
p(x) :- b(x), c(x), !, d(x).
p(x) :- f(x).
a(1).
b(1).
c(1).
b(2).
c(2).
d(2).
f(3).

?- p(x).
